<!DOCTYPE html>
<html>

<head>
	<meta name="darkreader-lock">
	<title>Atapi's Homepage! :: Blog :: Those Weird Numbers from the Sky</title>
	<base href="../../" />
	<meta property="test:baseurl" content="/">
	<link rel="stylesheet" href="/styles/global.css">
	<meta charset="utf-8" />
	<link rel="shortcut icon" href="assets/img/global/favicon.ico">
</head>

<body>
	<div class="mainContainer">
		<script src="scripts/header.js"></script>
		<div class="column mainContent">
			<h1><img style="vertical-align:middle" src="assets/img/blog/icon.png"> Interesting Observations from Nintendo</h1>
			<p>
				November ?, 2024<br/>
				Category: Infodump<br/>
			</p>
			<br/>
			<p>
				Remember the 2020/21 Nintendo data leaks? I certainly do, remember them like I was yesterday. Certainly gave me a reason to wake up in the morning during the COVID-19 pandemic, when I was stuck at home with nothing to do for the remainder of 10th grade.<br/><br/>
				I kinda wanna use this page to insert my own findings and things of interest that I found after a curory look back at them. :3<br/><br/>
				<span style="color: red">
					DISCLAIMER: experts it is okay if you cringe at my surface-level analysis of everything, i'm just poking at what i think is cool and curious and am not an expert in literally anything ever<br/><br/>
				</span>
				<h1>Also of note: if you have hobbies or responsibilities that would be<br/><br/><br/> compromised by viewing this material, please close this page now.</h1><br/>
			</p>
			<h2>unsorted.7z</h2>
			<p>
				<code>unsorted.7z</code> is the name of one of the earliest archives from the BroadOn breach, appearing on May 1st, 2020. This comes hot onthe heels of various development files and CIAs for Pokémon games on the Nintendo 3DS, as well as all of the title keys for DSi, 3DS, and Wii U.<br/><br/>
				This archive comes in the form of three CVS repositories.<br/><br/>
				One of the first things I noticed is that the <code>depot</code> repository is that the earliest commit goes to 2002, and this repo is relating to the iQue Player, which released in November 2003.<br/>
				<img src="/assets/img/blog/gigaleak/depot_firstcommit.png"><br/><br/>

				<code>depot/hw/chip/lib/kilopass/081205/</code> is a folder that contains verilog files and documentation to the Kilopass XPM products as of 2005, which are proprietary one-time-programmable non-volatile memory solutions. This information is kept separate from the rest of the iQue Player project since it is property licensed from another firm.<br/><br/>
				<code>depot/rf/</code> contains more interesting stuff. The <code>rf</code> in the path is supposed to designate <i>RouteFree</i>, which would later become <i>BroadOn</i>, and then <i>iGware</i>, and now the company exists as <i>Acer Cloud Technology</i>.<br/><br/>
				Anyway,<br/>
				<img src="/assets/img/blog/gigaleak/rf.png"><br/><br/>
				<code>doc</code> contains documentation on something called the "BB Game System", or "BB Player", which is a recurring name throughout this repository.<br/>
				<img src="/assets/img/blog/gigaleak/bb.png"><br/><br/>
				"BB" was the working name for what would eventually become the iQue Player, and supposedly means "BroadOn Board.<br/><br/>
				There are a handful of files under <code>bb_depot</code> that refer to <code>remote_mgmt_files</code> but I'm not sure if these graphs where intended to be used for anything. They seem to be about an internet connection on the iQue Player itself.<br/>
				<img src="/assets/img/blog/gigaleak/ique_net_maybe.gif"><br/><br/>
				
				What ended up actually happening was we initially got the iQue Depot, which was a store Kiosk the user would bring their iQue Player to in order to purchase and download games.<br/>
				<img src="/assets/img/blog/gigaleak/depot_b2.jpg"><br/><br/>

				This later got replaced with some Windows software called "iQue@Home." All iQue Player units had to have their firmware "SKSA" updated in order to access iQue@Home.<br/><br/>

				The rest of the documentation is pretty much the standard stuff: System software notes, SoC block diagrams, the works. Here's a cool picture of a really shiny iQue Player, its "Industrial Design."<br/>
				<img src="/assets/img/blog/gigaleak/raw-ique.jpg"><br/><br/>

				However they do have some extra docs on porting Nintendo 64 games to the iQue Player, which notes how the PIF (Peripheral Interface) was missing on the iQue. On the N64, the PIF was responsible for being a security chip, handling controller input, the soft reset button, and various other information about the current configuration. It also nows the differences in access timings between N64 Game Paks and the flash memory in the iQue, and mentions how they had to alter game save behavior due to lack of EEPROM/SRAM.<br/><br/>
				The MIPS core was also slightly different, with the MIPS data cache line size being increased from 16 bytes in the original to 32 bytes. This also meant that DMA and RCP buffer alignment had to be altered.<br/><br/>
				The iQue Player also had DDR memory over the N64's RDRAM. "Should not be any issues," the engineers wrote.<br/><br/>
				Much of libultra, the N64 SDKs operating system, had to be altered to accomodate these changes. For example, the <code>osEeprom</code> routines were altered to emulate either a 256 byte or 2KB EEPROM using the onboard flash. For SRAM, libultra does not have any specific routines so they had to make those changes on a game-by-game basis.<br/><br/>
			
				<code>rf/hw/</code> contains source files behind the motherboard, the cartridge board (nicknamed "Dookie"), as well as various other things. The board layouts are in DSN format, which require OrCAD to view, but they probably don't work in modern versions of the software.<br/><br/>
				<code>chip</code> contains verilog files for the iQue Player SoC and other components, with a top level verilog source file for the SoC appearing to be at <code>rf/hw/chip/src/bb.v</code>. This file, to my understanding, provides the skeleton for each of the specific units and describes how they are supposed to connect, like here in this screenshot they created an instance of the MIPS and are defining names for each of the pins.<br/>
				<img src="/assets/img/blog/gigaleak/bbcpu.png"><br/><br/>

				I do find it humorous that they renamed RCP to BCP.<br/>
				<img src="/assets/img/blog/gigaleak/bcp.png"><br/><br/>

				This section of the repostiory is reminiscient of the "Oman Archive," which was an old data dump from 1999 that came internally from a SiliconGraphics employee. It contained a lot of verilog and source files for the N64 and its hardware.<br/><br/>

				<code>rt/sw/bbplayer</code> contains a lot of source code used in development. <code>apps</code> and <code>apps.released</code> contain a lot of testing programs used in-house. The <code>morphcube</code> demo contains this picture of batman that goes really hard.<br/>
				<img class="pixelArt" width="450px" src="/assets/img/blog/gigaleak/batman.png"><br/><br/>
				
				Other than that, these demos are the usual testing programs.<br/><br/>

				There is this cool demo from the N64 SDK that makes a return called <i>Mirror House Cornflakes</i>, developed by Monegi. Made simply as a demonstration of the libultra and the N64 SDK and how to program this strange machine.<br/>
			</p>
			<img width="320px" src="/assets/img/blog/gigaleak/mirror_house/-000.png"> <img width="320px" src="/assets/img/blog/gigaleak/mirror_house/-002.png"> <img width="320px" src="/assets/img/blog/gigaleak/mirror_house/-003.png"> <img width="320px" src="/assets/img/blog/gigaleak/mirror_house/-005.png"> <img width="320px" src="/assets/img/blog/gigaleak/mirror_house/-006.png"> <br/><br/>
			<p>
				<code>depot/rf/sw/n64os20l/lib/BringupBoot/IPL4</code> contains full source code to the Nintendo 64DD's IPL.<br/>
				<img src="/assets/img/blog/gigaleak/ipl4.png"><br/><br/>
				Since Super Mario appears in the IPL there is a handful of original source code from Super Mario 64 in here, mostly for animation data.<br/>
				<img src="/assets/img/blog/gigaleak/u64mb.png"><br/><br/>

				The first commit for <code>depotrvl</code> was made in January of 2006, despite having files that go back to much earlier than that.<br/>
			</p>
			<img src="/assets/img/blog/gigaleak/depotrvl.png"><br/><br/>
			<p>
				<code>depotrvl</code> is a repository that's dedicated to the Nintendo Wii, signified by the <code>rvl</code> suffix.<br/><br/>
				Once again, we're given the folder structure of <code>doc</code>, <code>hw</code>, and <code>sw</code>. <code>doc</code> contains the usual set of documentation, <code>hw</code> contains a bunch of verilog source code (but not for anything really notable), and <code>sw</code> contains a lot of important source code.<br/><br/>
				<code>hw/chip/sim/aes/compile</code> is a script designed for simulation of AES encryption circuitry, written in Verilog. What I find interesting here is that this script actually calls for CSH instead of something more common like Bash. On top of that, the script calls for a command called <code>ncverilog</code>, which a bit of digging showed that "Incisive" was their circuitry simulator.<br/>
				<img src="/assets/img/blog/gigaleak/csh.png"><br/><br/>
				<code>sw/nintendo/boot/</code> appears to have four revisions of firmware images for an early "Nintendo Revolution emulator" board, if the strings inside the ROM images are to be believed. Couldn't really dig up more information than that.<br/>
			</p>
			<img width="768px" src="/assets/img/blog/gigaleak/tdev.png"><br/><br/>
			<p>
				<code>sw/nintendo/di-dvd/DVD_src/build/libraries/dvd/src/</code> and <br/><code>sw/nintendo/di-dvd/DVD_src_PATCH_17Jun2005/build/libraries/dvd/src/</code><br/>
				contain source code to what appears to be libraries for controlling the DVD drive, with dates going back to 1998.<br/><br/>

				<code>sw/rvl/boot/boot0/</code> contains source code to the Wii's <code>boot0</code>. In here, <code>key.c</code> contains the key used to decrypt the <code>boot1</code> executable.<br/>
				<img src="/assets/img/blog/gigaleak/key.png"><br/>
				In fact, all of this code lines up with the <a href="https://wiibrew.org/wiki/Boot0/Code_dump">assembly dump</a> that is available on WiiBrew.<br/><br/>

				<code>sw/rvl/boot/boot1/</code> contains the source code to <code>boot1</code>. The job of this thing is to initialize more hardware devices and load <code>boot2</code>. Interestingly enough, there are also folders for <code>boot1.diag</code> and <code>boot1.n</code>.<br/><br/>

				<code>sw/rvl/boot/boot2/</code> contains a binary image of <code>boot2</code>.<br/>
				<img src="/assets/img/blog/gigaleak/boot2.png"><br/>
				There is however, an alternate version of <code>boot2</code> called <code>sd_boot</code>, located in <code>boot2.mfr</code>. This alternate variant is used in the factory setup process, after <code>boot0</code> has been imprinted into the MaskROM inside Hollywood. <code>sd_boot</code> would be contained inside a special "prewrite" NAND image that also contained the final <code>boot1</code>. Instead of reading or writing to the NAND, <code>sd_boot</code> instead would load some WAD files from an SD card, one of which contained an ARM binary that would be run on the IOP, better known as the Starlet. Typically, this image will install the NDEV menu and a couple versions of IOS.<br/><br/>
				After this, a disc known as "123J" would be inserted into the Wii. Not much is known about this disc.<br/><br/>
				The next disc used in the factory is <code>RVL_UJI_DIAG</code>, which is a disc that performs various diagnostics programs to ensure a working RVL unit, kinda like the AGING programs used in other consoles.<br/><br/>
				Next, would be disc "122E," which installs DATA CHECK & LOG CHECK to ensure everything passed.<br/>
			</p>
			<img src="/assets/img/blog/gigaleak/datachk.png"><br/><br/>
			<p>
				<code>rvl-factory</code> is a small repository that contained various files used by BroadON and Nintendo during the factory, such as SD Card images and NAND blocks.<br/>
				<img src="/assets/img/blog/gigaleak/rvl-factory.png"><br/>
				Not exactly sure how to use these since none of the WADs are usable in Dolphin.<br/><br/>
			</p>
			<h2>3DS_manu.7z</h2>
			<p>
				<code>3DS_manu.7z</code> was a file that dropped on May 9th, 2020, containing the complete collection of files used for the European version of the New Nintendo 2DS XL, which I will from now on refer to as JAN units.<br/>
				<img src="/assets/img/blog/gigaleak/3DS_manu.png"><br/><br/>

				These programs are designed to validate all of the hardware for the JAN units. They can be run on RED (New 3DS XL) units, but cannot be run on Old 3DS units.<br/>
				<iframe width="240px" height="135px" src="https://www.youtube-nocookie.com/embed/sjXN7kw8YiE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
				<iframe width="240px" height="135px" src="https://www.youtube-nocookie.com/embed/yiIj7MuNDfU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br/>
				None of these testing programs work on Citra, so please excuse the videos I recorded four years ago.<br/><br/>
				And now, a collection of interesting looking images from inside the executables.<br/><br/>
			</p>
			<img src="/assets/img/blog/gigaleak/ctraging/AccAgain.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/BarcodeScanner.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/CheckLed1_RED.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/CloseAndPushR_KTR.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/CompositeApplication.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/FoldAndOpen.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/gyro_Prepare.png">
			<img src="/assets/img/blog/gigaleak/ctraging/gyro_XAxisTest.png">
			<img src="/assets/img/blog/gigaleak/ctraging/gyro_YAxisTest.png">
			<img src="/assets/img/blog/gigaleak/ctraging/gyro_ZAxisTest.png">
			<img src="/assets/img/blog/gigaleak/ctraging/MicOpening.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/pit_cover.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/pit_open.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/PushR_RED.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/QtmCal_PushButtonLR_320_240.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/QtmCal_SetUp.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/ShockTest.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/suzuki_ikko_button_B_320_240.jpg">
			<img src="/assets/img/blog/gigaleak/ctraging/suzuki_ikko_stop_horror_400_240.jpg"><br/>
			Doohickey headquarters up here.
			
			<br/><br/>

			<h2>ctr.7z</h2>
			<p>
				<code>ctr.7z</code> consists of two folders, <code>ctr</code> and <code>svn</code>.<br/><br/>
				<code>ctr/include/aoss/</code> is a folder that contains header files relating to A.O.S.S. by Buffalo Technology, which was an old way of quickly setting up Wi-Fi connections with a single button press.<br/><br/>
				<code>ctr/include/gles2</code> has header files for OpenGL ES 2.<br/><br/>
				<code>ctr/sources/bootrom/CTR/private/build/bootrom/ctr_bootrom</code> includes the source code to the Nintendo 3DS Boot ROMs, both the ARM9 and the ARM11.<br/><br/>
				<code>ctr/sources/bootrom/CTR/doc/CTR_BootRomInfo.vsd</code> contains this interesting page about the 3DS' Blue Screen error when it fails to boot.<br/>
				<img src="/assets/img/blog/gigaleak/bootrom_error.png"><br/>
				To translate, the formatting is as follows:<br/>
				<code>BOOTROM</code> (ROM revision, usually 8046)<br/>
				<code>ERRORCODE:</code><br/><br/>
				- Byte 1: Lid closed detection: <code>00</code> for Open, <code>01</code>: for closed by DS_R7, and <code>02</code> for closed by MCU<br/>
				- Byte 2: NOR Load Error<br/>
				- Byte 3: Card Load Error<br/>
				- Byte 4: NAND Load Error<br/>
				Example error code: <code>00F800FE</code><br/><br/>

				The top eight bytes of information show error codes for the first eight partitions of the NAND, in this order:<br/>
				3, 2, 1, 0, 7, 6, 5, 4<br/><br/>

				The bottom left four bytes refer to NAND control errors, and the bottom right four bytes refer to NAND internal errors.<br/><br/>

				There are a lot of listed errors and I won't go into all of them, but take this following example message:<br/>
				<code>BOOTROM 8046</code><br/>
				<code>ERRCODE: 00F800FE</code><br/>
				<code>00000000 00000000</code><br/>
				<code>00000400 00000000</code><br/><br/>
				
				<code>F8</code> refers to recieving bad data from NOR, and <code>FE</code> refers to a NAND initialization error. The <code>00000400</code> refers to communication timeout when attempting to initialize the NAND.<br/><br/>
				Since in this particular case, we cannot communicate with the NAND, we can't really get any data on its partitions or status, thus the other messages remain at zero. An error code like this usually occurs if the NAND has failed or if a hardmod has been botched.<br/><br/>

				<code>ctr/sources/kernel</code> contains the source code to the Horizon OS kernel, written in C++ and Assembly.<br/><br/>

				<code>ctr/sources/libraries</code> contains the source code to all of the system libraries. What I find curious is how they had built-in MP3 decoding support in here. They also had a random number generator, using the Mersenne Twister method.<br/><br/>

				<code>ctr/sources/processes</code> contains the source code to all of the background processes of the Nintendo 3DS, including things like <code>boss</code>, <code>nwm</code>, <code>mcu</code>, and more. The <code>mcu</code> folder also contains 14 different builds of the MCU ROM image.<br/><br/>

				<code>ctr/source/tools</code> contains the source code to many SDK tools, including things like DevMenu. The folder <code>makerom</code> contains the C# source to a Windows tool that I can only assume was used for producing CIAs, CSUs, and other 3DS package/executable formats.<br/><br/>
			
				<code>ctr/source/tools/USBDIO</code> contains a package relating to devices known as "USB-DIO." These are little USB breakout boards that can be controlled with libraries for Visual Basic, MSVC, and MSVC++. The folder also contains a driver for Windows XP and Vista.<br/>
				<img src="/assets/img/blog/gigaleak/usbdio.png"><br/>
				Perhaps Nintendo used this during development of the 3DS as a means of debugging? Dunno.<br/><br/>

				<code>ctr/svn</code> contains two SVN repositories, <code>ctr_mcu</code> and <code>ctr_Repair</code>.<br/>
				<code>ctr_mcu</code> contains the source code and development history of the Nintendo 3DS MCU ROM image.<br/>
				<code>ctr_Repair</code> contains the source code and development history of tools that were used in the 3DS repair centers.<br/>
				<code>BoxyardEraser</code> is a tool that appears to be designed to remove 3D Movie Player videos, which were all codenamed "BOXYARD." I don't really have much more information than that.<br/>
				I dunno what <code>CardCup</code> or <code>CardSaveData</code> are supposed to do.<br/>
				<code>ConsoleDataMigration</code> was a set of internal tools used by Nintendo to transfer data between Nintendo 3DS units. The program would require the operator to insert a blank SD card, and the <code>CTR Console Backup</code> would dump important system contents to it.<br/>
				<img src="/assets/img/blog/gigaleak/Backup_Wait_PullOut.png"><br/><br/>

				The contents of the newly created backup would be as follows:<br/>
				<code>CTRBackup/</code> - CTRNAND Contents<br/>
				<code>TWLPhotoBackup/</code> - DSi Camera Backup<br/>
				<code>TWLSoundBackup/</code> - DSi Sound Backup<br/>
				<code>TWLBackup/</code> - DSi NAND Backup<br/>
				<code>MoveContext.bin</code> - Unknown encrypted file<br/>
				<code>Migration_Log.txt</code> - Backup of the contents of the logging on the bottom screen<br/>
				<code>movable.sed</code> - Console-unique private key file<br/>
				<code>NtrNorSetting.bin</code> - Nintendo DS name, color, birthday, and message settings<br/>
				<code>serial.bin</code> - Console serial number<br/>
				<code>rtc.bin</code> - Real-Time Clock Calibration<br/>
				<code>CountrySetting.bin</code> - Location information<br/>
				<code>FileList.txt</code> - List of files extracted on SD card<br/>
				<code>TwlTitleList.txt</code> - List of DSi installed titles<br/>
				<code>version.bin</code> - System version information<br/>
				<code>deviceId.bin</code> - Device ID (Unsure specifically what this is)<br/>
				<code>Region.bin</code> - Region information<br/><br/>

				<code>CTR Console Restore</code> was another program that was used to to the reverse, using an SD backup to restore to a different Nintendo 3DS unit.<br/>
				<img src="/assets/img/blog/gigaleak/Restore_Succeeded.png"><br/><br/>

				It also has the ability to transfer the assignments of a user's SD Card over to the new system. Once it's done doing that, it will ask the operator to insert the SD Card used in the backup process, where it will then write the following files:<br/>
				<code>WriteFinished</code> - Write confirmation<br/>
				<code>UpdateFinished</code> - Update confirmation<br/>
				<code>ConsoleInitialized</code> - Init confirmation<br/>
				<code>TryRestoreSameConsole</code> - Init confirmation</br>
				<code>tpCalibration.bin</code> - More data extracted from NAND<br/>
				<code>RtcSyncFinished</code> - RTC sync confirmation<br/>
				<code>AccountDeletedChecked</code> - Confirmation that the old user account has been deleted(?)<br/>
				<code>AccountTransferedChecked</code> - Confirmation that the user account has been transferred<br/>
				<code>DownloadSDCIFinished</code> - SD Card management information has been successfully created<br/>
				<code>cfgCalibration.bin</code> - More data extracted from NAND<br/><br/>

				That's pretty much all there is for ctr.7z that I found interesting. Everything else here is rather mundane.<br/><br/>
			</p>
			<h2>svn_1.068.zip</h2>
			<p>
				This file contains the source code to the Nintendo 3DS Virtual Console.<br/><br/>
				<code>svn_1.068/patch/Sample.patch</code> shows a sample layout for how game-specific patches were implemented in the Virtual Console emulator. The developer could apply custom CGB palettes and also patch various memory addresses.<br/>
				<img src="/assets/img/blog/gigaleak/samplepatch.png"><br/><br/>
			
				<code>svn_1.068/Tools/NESROMMaker</code> contains a tools that appears to convert iNES and FDS ROM images into ones that were used for Nintendo Virtual Console, and was developed by "Chentian" of iQue.<br/><br/>
				
				<code>svn_1.068/src/AGB</code> contains a Game Boy Advance emulator, written in 2009, presumably before Nintendo added OS/Silicon support for Game Boy Advance titles to be run. What's really curious is that it contains a dynamic recompiler that has the capabilities of emitting machine code for both ARM and x86.<br/>
				<img src="/assets/img/blog/gigaleak/agb_x86.png"><br/><br/>

				The Nintendo 3DS Virtual Console emulator is very portable, and <code>svn_1.068/src/PC</code> contains code that allows it to be compiled for Windows. Same goes for <code>svn_1.068/src/EmuShell/PC</code>.<br/><br/>
			</p>
			<h2>ctr-etc.7z</h2>
			<p>
				<code>ctr-etc.7z</code> contains documentation about the Nintendo 3DS security model, dev board, boot process, and crypto. I talso contains many internal and SDK programs such as DevMenu, SystemUpdater, and a bunch of sample demos.<br/><br/>
				<code>ctr/CTR Security.pdf</code> has a presentation from BroadOn about the Nintendo 3DS security, but what I find interesting is their sort of "if this happens we are so screwed" attitude towards certain things.<br/>
			</p>
			<img src="/assets/img/blog/gigaleak/breach.png"><br/><br/>
			<h2>other.7z</h2>
			<p>
				<code>other.7z</code> contained six archives:<br/>
				<code>CGB.7z</code> - CGB source code for <i>The Legend of Zelda: Link's Awakening</i><br/>
				<code>Famicom_NES.7z</code> - Master ROM database for Famicom/NES<br/>
				<code>NEWS.7z</code> - Unknown, various Sony NEWS workstation backups?<br/>
				<code>SFC.7z</code> - Various Super NES game source code and demos<br/>
				<code>agb_bootrom.zip</code> - SVN tree of Game Boy Advance and Game Boy Color boot ROMs<br/>
				<code>dmg.7z</code> - DMG source code for <i>The Legend of Zelda: Link's Awakening</i><br/><br/>

				The files in <code>Famicom_NES.7z/HVC</code> date back to July of 1994, so I imagine that Nintendo of Japan had a digital archive project so that they could keep all of these ROM images around in the event that the physical ROMs died.<br/>
				Interestingly, <code>Famicom_NES.7z/NES/ROYALTY</code> is all dated April of 1996.<br/>
				Anyway, all of these are raw ROM dumps, no iNES header is found here like what Nintendo would begin to use later on once they hired Kawasedo.<br/><br/>

				At the time of the leak, many of these ROM images were undocumented, and <code>Famicom_NES.7z/NES/NOA/NESXZIP.066</code> would actually end up containing an unseen alternate revision of the Nintendo World Cup cartridge ROM!<br/>
				<img width="75%" src="/assets/img/blog/gigaleak/mrcheeze_1.png"><br/><br/>

				<code>other.7z</code> has several prototype builds of Star Fox 2.<br/>
				<code>NEWS.7z/StarFox2/SF2/SF.ROM</code><br/>
				<code>NEWS.7z/StarFox2/KAWAGOE/SF.ROM</code><br/>
				<code>SFC.7z/ROM/StarFox2/usa/SXJ03.COM</code><br/>
				<code>SFC.7z/ソースデータ/StarFox2/SF2/SF2_CES.zip</code><br/><br/>

				That last one sounded a few alarms when it first leaked. That's the ROM that was used on the development cartridge at CES 1994 when Star Fox 2 was first being shown off. The cartridge that was famously almost stolen by an Arizona man who was quickly arrested and charged with felony grand larceny.<br/>
				<img class="pixelArt" width="512px" src="/assets/img/blog/gigaleak/SF2CES-Title.png"><br/><br/>

				<code>SXJ03.COM</code> is the master ROM that Nintendo had of Star Fox 2, dated September 21, 1995. It is actually <i>not</i> the same as the ROM that was officially released in 2017 as part of the Super NES Classic, there's a few touch-ups they made here and there.<br/>
				<img src="/assets/img/blog/gigaleak/sf2_master.png"><br/><br/>

				<code>NEWS.7z/StarFox2/KAWAGOE/SF.ROM</code><br/>
				<img width="50%px" src="/assets/img/blog/gigaleak/sf2_03311994_1.png"><img width="50%px" src="/assets/img/blog/gigaleak/sf2_03311994_2.png"><img width="50%px" src="/assets/img/blog/gigaleak/sf2_03311994_3.png"><br/><br/>
			
				<code>SFC.7z\ソースデータ\ヨッシーアイランド\ツール\donkey_test</code> is a folder located in the source code of Yoshi's Island.<br/>
				There are two files: <code>super_donkey_1.bin</code> and <code>super_donkey_2.bin</code>.<br/>
				<iframe width="240px" height="135px" src="https://www.youtube-nocookie.com/embed/QSBVyP_BkMQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
				<iframe width="240px" height="135px" src="https://www.youtube-nocookie.com/embed/1PtJmw1pNo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br/><br/>

				<code>SFC.7z\ソースデータ\ヨッシーアイランド\ツール\sleep_test</code> is another folder here, and it contains another unused game idea.<br/>
				<iframe width="240px" height="135px" src="https://www.youtube-nocookie.com/embed/nny81nnJ5uY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br/><br/>

				Both of these prototypes use the same art style, so what I think was going on here was that Nintendo had the idea for this hand-drawn art style, and tried various ideas but nothing stuck until they went with Yoshi's Island.<br/><br/>
				
				The <code>BIN</code> folder of the Star Fox 2 source code contains a lot of DOS tools used by Argonaut during development. Here's a few of them:<br/>
			</p>
			<img width="30%" src="/assets/img/blog/gigaleak/dos_1.png"> <img width="30%" src="/assets/img/blog/gigaleak/dos_2.png"> <img width="30%" src="/assets/img/blog/gigaleak/dos_3.png"> <br/><br/>

			<p>
				<code>SFC.7z/ソースデータ/StarFox2/SFCAD</code> contains the "Starfox CAD Tool," created in 1994 by Dylan Cuthbert.<br/>
				<img width="30%" src="/assets/img/blog/gigaleak/sfcad_1.png"> <img width="30%" src="/assets/img/blog/gigaleak/sfcad_2.png"> <img width="30%" src="/assets/img/blog/gigaleak/sfcad_3.png"> <img width="30%" src="/assets/img/blog/gigaleak/sfcad_4.png"> <img width="30%" src="/assets/img/blog/gigaleak/sfcad_5.png"><br/>
				<span style="font-size: 12pt">Make sure you open these images in a new tab to see full size!</span><br/><br/>
			
				<code>other.7z/agb_bootrom.zip</code> contains the SVN repos where the source code to the Game Boy Advance boot ROMs was stored, which includes both the AGB and CGB boot ROMs. There isn't any actual development history behind the ROMs, but it's great to have the final source nonetheless.<br/>
				<img src="/assets/img/blog/gigaleak/agb_bootrom.png"><br/>
				<img src="/assets/img/blog/gigaleak/cgb_bootrom.png"><br/><br/>
				
				It's a known fact that the GBA boot ROM has unused code that detects if a CGB game is inserted, and fades out before booting the CGB game. However, Nintendo could never get this to work, most likely due to the difference in voltage between AGB (3.3v) and CGB (5v) cartridges.<br/><br/>
				This leak actually has the source code behind the routines!<br/>
			</p>
			<img src="/assets/img/blog/gigaleak/agb_waitcnt.png"><br/>
			<img width="50%px" src="/assets/img/blog/gigaleak/agb2cgb.png"><br/><br/>
			<p>
				I find it odd how the routine uses the BG palette to perform the fade instead of <code>REG_BLDCNT</code> and <code>REG_BLDY</code>, like there there for this exact type of thing, right?<br/><br/>
			
				We also get Nintendo's official compression tool, used for LZ77, Diff, Huffman, or RLE compression of arbitrary data.<br/>
				<img src="/assets/img/blog/gigaleak/agbcomp.png"><br/><br/>

				The GBA boot ROM also uses the MusicPlayer2000 engine, included as part of the SDK, and responsible for sound in a large amount of the console's lineup (and also infamous for having a poor mixer early on).<br/>
				<img src="/assets/img/blog/gigaleak/mp2k.png"><br/><br/>
			
				In <code>multi18_Arm.s</code> we can see the keys used to decrypt and transfer multiboot images over SIO.<br/>
				<img src="/assets/img/blog/gigaleak/kawasedo.png"><br/><br/>
				When put together, the sequence <code>4B 61 77 61 73 65 64 6F</code>. This creates the string <code>Kawasedo</code>, the pseudonym of Tomohiro Kawasae, who is most famous for being hired by Nintendo for his NES emulation work, and eventually writing the NES emulator for <i>Dōbutsu no Mori</i>, or <i>Animal Crossing</i> as we know it over here in the United States.<br/><br/>
			</p>

			<h2>netcard.7z</h2>
			<p>
				<code>netcard.7z</code> was a file that contained source code and design files for the iQue Game Boy Advance, as well as files relating to an unreleased peripheral called the "Netcard."<br/><br/>
				
				<code>gba/depot-offline/hw/chip/lib</code> contains all the modules used by iQue for the development of the iQue Game Boy Advance. All coming from ARM, Altera, BroadOn, Kilopass, Samsung, and more.<br/><br/>

				<code>gba/depot-offline/hw/chip/altera</code> contains the Altera Quartus project file. We can see that the FPGA that iQue was using was a Stratix EP1S60F1020C6.<br/><br/>
			
				<code>gba/depot-offline/hw/system/fpga_board</code> contains the design layout for the FPGA test board that the iQue GBA was tested with.<br/>
			</p>
			<img width="75%" src="/assets/img/blog/gigaleak/agb_fpga.png"><br/><br/>
			<p>
				Amongst other things in <code>gba/depot-offline/hw/system/</code>, there contain board gerbers, pick and place machine configurations, schematics, and more for both the test board and possibly the final board.<br/><br/>
			
				
			</p>


		</div>
		<script src="scripts/footer.js"></script>
	</div>
</body>

</html>